<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Sprite Sheet Exporter</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body onload="onLoaded()">
    <div class="main-container">
      <a href="javascript:history.go(0)" style="color: white">Refresh panel</a>

      <div class="header">
        <span class="header-icon">üñºÔ∏è</span>
        <span class="header-title">Sprite Sheet Exporter</span>
      </div>
      <hr class="divider" />

      <!-- Show this block if NO comp is selected -->
      <div class="comp-empty" id="no-comp-panel">
        <h2>‚ö†Ô∏è No Composition Selected</h2>
        <p>Please select a composition in After Effects to continue.</p>
        <button class="primary-btn update-composition-btn">
          Update Active Composition
        </button>
      </div>

      <!-- Show this block if a comp IS selected -->
      <div class="comp-details" id="comp-details-panel" hidden="true">
        <div class="comp-title-row">
          <span class="comp-title" id="comp-name">My Composition</span>
          <button
            class="refresh-btn update-composition-btn"
            title="Update Active Composition"
            aria-label="Refresh composition"
            id="refreshCompositionBtn"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="22"
              height="22"
              viewBox="0 0 24 24"
              fill="none"
              stroke="#fff"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M20 11a8.1 8.1 0 0 0-15.5-2M4 5v4h4" />
              <path d="M4 13a8.1 8.1 0 0 0 15.5 2M20 19v-4h-4" />
            </svg>
          </button>
        </div>
        <div class="details-grid">
          <div>
            <label>Width</label>
            <span id="comp-width">-</span>
          </div>
          <div>
            <label>Height</label>
            <span id="comp-height">-</span>
          </div>
          <div>
            <label>Frame Rate</label>
            <span id="comp-framerate">-</span>
          </div>
          <div>
            <label>Duration</label>
            <span id="comp-duration">-</span>
          </div>
          <div>
            <label>Frames</label>
            <span id="comp-numFrames">-</span>
          </div>
        </div>
        <button id="exportSpriteSheet" class="export-btn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path
              d="M12 16v-8M8 12l4 4 4-4"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <rect
              x="4"
              y="18"
              width="16"
              height="2"
              rx="1"
              fill="currentColor"
              opacity="0.15"
            />
          </svg>
          Export Sprite Sheet
        </button>

        <div
          id="progress-container"
          style="
            display: none;
            width: 100%;
            background: #eee;
            border: 1px solid #ccc;
            height: 20px;
            margin-top: 10px;
          "
        >
          <div
            id="progress-bar"
            class="pulsing"
            style="
              width: 0%;
              height: 100%;
              background: #4caf50;
              transition: width 0.3s;
            "
          ></div>
        </div>

        <button id="toggleLogsBtn">Show Logs</button>

        <div id="logContainer"></div>
      </div>
    </div>
    <script type="text/javascript" src="CSInterface.js"></script>
    <script type="text/javascript" src="ext.js"></script>
    <script type="text/javascript" src="index.js"></script>
  </body>
</html>
